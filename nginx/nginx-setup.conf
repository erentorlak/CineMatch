# # # server {
# # #   # Docker will map 8080 to 80
# # #   listen 80;

# # #   # Serve static files from shared volumn 
# # #   location /api_static/ {
# # #     alias /srv/app/static;
# # #   }

# # #   # Serve media files from shared volumn
# # #   location /api_media/ {
# # #     alias /srv/app/media;
# # #   }

# # #   # Redirect Django admin or api or websockets
# # #   location ~ ^/(admin|api|ws) {
# # #     proxy_pass http://django:8000;
# # #     proxy_redirect default;
# # #     include /etc/nginx/app/include.websocket;
# # #     include /etc/nginx/app/include.forwarded;
# # #   }

# # #   # Redirect any other requests to the React server
# # #   location / {
# # #     proxy_pass http://react:3000;
# # #     proxy_redirect default;
# # #     include /etc/nginx/app/include.websocket;
# # #     include /etc/nginx/app/include.forwarded;
# # #   }

# # # }


# # upstream api {
# #     server backend:8000;
# # }

# # server {
# #   listen 8080;

# #   location / {
# #     root /var/www/react;
# # #    root /var/www/react;
# #     try_files $uri /index.html;
# #   }

# #   location /api/ {
# #     proxy_pass http://api;
# #     proxy_set_header Host $http_host;
# #   }

# #   location /admin/ {
# #     proxy_pass http://admin;
# #     proxy_set_header Host $http_host;
# #   }


# # }

# # upstream backend {
# # 	server backend:8000;
# # }

# # server {
# # 	listen 80;

# # 	location /api/ {
# # 		proxy_pass http://backend;
# # 	}

# # 	location /static/rest_framework/ {
# # 		root /static/;
# # 	}

# # 	location / {
# # 		root /var/www/frontend;
# # 		try_files $uri $uri/ /index.html;
# # 	}

# #   location /static/ {
# #     root /var/www/frontend;
# #   }

# #   location /api/ {
# #     proxy_pass http://backend:8000;
# #     proxy_set_header Host $host;
# #     proxy_set_header X-Real-IP $remote_addr;
# #     proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
# # }


# #   location / {
# #     proxy_pass http://frontend:5173;
# #     proxy_set_header Host $host;
# #     proxy_set_header X-Real-IP $remote_addr;
# #     proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
# # }



# # }

# upstream backend {
# 	server backend:8000;
# }

# server {
# 	listen 80;

# 	# location /api/ {
# 	# 	proxy_pass http://backend;
# 	# }

# 	location /static/rest_framework/ {
# 		root /static/;
# 	}

# 	# location / {
# 	# 	root /var/www/frontend;
# 	# 	try_files $uri $uri/ /index.html;
# 	# }

# 	location /static/ {
# 		root /var/www/frontend;
# 	}

# 	location /api/ {
# 		proxy_pass http://backend;
# 		proxy_set_header Host $host;
# 		proxy_set_header X-Real-IP $remote_addr;
# 		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
# 	}

# 	location / {
# 		proxy_pass http://frontend:5173;
# 		proxy_set_header Host $host;
# 		proxy_set_header X-Real-IP $remote_addr;
# 		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
# 	}
# }

upstream backend {
	server backend:8000;
}

server {
	listen 80;

    server_name localhost;

    root /usr/share/nginx/html;  # Adjust the root directory based on your setup

    index index.html;

	location /api/ {
		proxy_pass http://backend;
	}

	location /static/rest_framework/ {
		root /static/;
	}

	location / {
		root /var/www/frontend;
		try_files $uri $uri/ /index.html;
	}


}
